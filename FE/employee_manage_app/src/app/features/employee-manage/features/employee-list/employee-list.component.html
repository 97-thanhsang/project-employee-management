<div class="container-fluid py-4">
  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="h3 mb-0 fw-bold text-dark">
      <span nz-icon nzType="team" nzTheme="outline" class="me-2 text-primary"></span>
      Danh Sách Nhân Viên
    </h1>
    <a nz-button nzType="primary" routerLink="/employee-manage/employees/add">
      <span nz-icon nzType="plus-circle"></span>
      Thêm Mới
    </a>
  </div>

  <!-- Error State -->
  @if (store.error()) {
  <nz-alert nzType="error" nzMessage="Lỗi" [nzDescription]="store.error()!.message" nzShowIcon nzCloseable
    (nzOnClose)="store.clearError()" class="mb-4 shadow-sm">
  </nz-alert>
  }

  <!-- Empty State -->
  @if (!store.hasEmployees() && !store.isLoading()) {
  <nz-card class="text-center py-5 shadow-sm rounded-3">
    <nz-empty nzNotFoundContent="Không có dữ liệu nhân viên. Hãy thêm nhân viên mới!" [nzNotFoundFooter]="footerTpl">
      <ng-template #footerTpl>
        <a nz-button nzType="primary" routerLink="/employee-manage/employees/add" class="mt-2">
          Thêm Nhân Viên Đầu Tiên
        </a>
      </ng-template>
    </nz-empty>
  </nz-card>
  }

  <!-- Data Table -->
  @if (store.hasEmployees() || store.isLoading()) {
  <nz-card [nzBordered]="false" class="shadow-sm rounded-3">
    <nz-table #basicTable [nzData]="store.employees()" [nzLoading]="store.isLoading()" [nzPageSize]="10"
      nzShowSizeChanger [nzTotal]="store.totalCount()">
      <thead>
        <tr>
          <th>Tên Nhân Viên</th>
          <th>Email</th>
          <th>Số Điện Thoại</th>
          <th>Chức Vụ</th>
          <th class="text-center">Thao Tác</th>
        </tr>
      </thead>
      <tbody>
        @for (data of basicTable.data; track data.employeeId) {
        <tr>
          <td class="fw-semibold">{{ data.name }}</td>
          <td>
            <a [href]="'mailto:' + data.email" class="text-decoration-none">{{ data.email }}</a>
          </td>
          <td>{{ data.contactNo }}</td>
          <td>
            <nz-tag [nzColor]="'blue'">
              {{ data.designationId | designationName: store.designations() }}
            </nz-tag>
          </td>
          <td class="text-center">
            <nz-space>
              <a *nzSpaceItem [appHasRole]="'Admin'"
                [routerLink]="['/employee-manage/employees', data.employeeId, 'edit']" nz-button nzType="default"
                nzShape="circle" nz-tooltip nzTooltipTitle="Sửa">
                <span nz-icon nzType="edit"></span>
              </a>
              <button *nzSpaceItem [appHasRole]="'Admin'" (click)="onDeleteEmployee(data.employeeId, data.name)"
                nz-button nzType="default" nzDanger nzShape="circle" nz-tooltip nzTooltipTitle="Xóa">
                <span nz-icon nzType="delete"></span>
              </button>
            </nz-space>
          </td>
        </tr>
        }
      </tbody>
    </nz-table>
  </nz-card>
  }
</div>