<div class="container-fluid py-4">
    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3 mb-0 fw-bold text-dark">
            <span nz-icon nzType="idcard" nzTheme="outline" class="me-2 text-primary"></span>
            Danh Sách Chức Danh
        </h1>
        <a nz-button nzType="primary" routerLink="/employee-manage/designations/add">
            <span nz-icon nzType="plus-circle"></span>
            Thêm Mới
        </a>
    </div>

    <!-- Error State -->
    @if (facade.viewModel().error) {
    <nz-alert nzType="error" nzMessage="Lỗi" [nzDescription]="facade.viewModel().error!.message" nzShowIcon nzCloseable
        (nzOnClose)="facade.loadDesignations()" class="mb-4 shadow-sm">
        <!-- Assuming clearError not in facade yet, using loadDesignations as recovery or need to add clearError -->
    </nz-alert>
    }

    <!-- Empty State -->
    @if (facade.viewModel().designations.length === 0 && !facade.viewModel().isLoading) {
    <nz-card class="text-center py-5 shadow-sm rounded-3">
        <nz-empty nzNotFoundContent="Không có chức danh nào. Hãy thêm chức danh mới!" [nzNotFoundFooter]="footerTpl">
            <ng-template #footerTpl>
                <a nz-button nzType="primary" routerLink="/employee-manage/designations/add" class="mt-2">
                    Thêm Chức Danh Đầu Tiên
                </a>
            </ng-template>
        </nz-empty>
    </nz-card>
    }

    <!-- Data Table -->
    @if (facade.viewModel().designations.length > 0 || facade.viewModel().isLoading) {
    <nz-card [nzBordered]="false" class="shadow-sm rounded-3">
        <app-designation-table [designations]="facade.viewModel().designations"
            [isLoading]="facade.viewModel().isLoading" [departments]="facade.viewModel().departments"
            (edit)="onEdit($event)" (delete)="onDelete($event)">
        </app-designation-table>
    </nz-card>
    }
</div>